---
title: 高性能 MySQL：MySQL 基准测试
date: 2018-09-14 13:25:58
categories:
	- 学习笔记
tags:
	- High Performance MySQL
	- MySQL
---

基准测试（benchmark）是针对系统设计的一种压力测试。通常的目标是为了掌握系统的行为。

## 为什么需要基准测试

基准测试是唯一方便有效的、可以学习系统在给定的工作负载下会发生什么的方法。基准测试可以观察系统在不同压力下的行为，评估系统的容量，掌握哪些是重要的变化，或者观察系统如何处理不同的数据。

基准测试的一个主要问题在于其不是真实压力的测试。

## 基准测试的策略

基准测试有两种主要的策略：一是针对整个系统的整体测试，另外是单独测试 MySQL。这两种策略也被称为集成式（full-stack）以及单组件式（single-component）基准测试。

<!-- more -->

### 测试何种指标

- 吞吐量
- 响应时间或者延迟
- 并发性
- 可扩展性

## 基准测试方法

### 设计和规划基准测试

规划基准测试的第一步是提出问题并明确目标。然后决定是采用标准的基准测试，还是设计专用的测试。

详细地写下测试规划。测试可能要多次反复运行，需要精确地重现测试过程，也应该考虑到未来，执行下一轮测试时可能已经不是同一个人了。

### 基准测试应该运行多长时间

基准测试应该运行足够长的时间。

如果系统有大量的数据和内存，要达到稳定状态可能需要非常长的时间。

有时候无法确认测试需要运行多长的时间才足够。如果是这样，可以让测试一起运行，持续观察直到确认系统已经稳定。

### 获取系统性能和状态

在执行基准测试时，需要尽可能多地收集被测试系统的信息。最好为基准测试建立一个目录，并且每执行一轮测试都创建单独的子目录，将测试结果、配置文件、测试指标、脚本和其他相关说明都保存在其中。

需要记录的数据包括系统状态和性能指标，诸如 CPU 使用率、磁盘 I/O、网络流量统计、SHOW GLOBAL STATUS 计数器等。

### 获得准确的测试结果

获得准确测试结果的最好办法，是回答一些关于基准测试的基本问题：是否选择了正确的基准测试？是否为问题收集了相关的数据？是否采用了错误的测试标准？

确认测试结果是否可重复。每次重新测试之前要确保系统的状态是一致的。如果是非常重要的测试，甚至有必要每次测试都重启系统。

### 绘图的重要性

